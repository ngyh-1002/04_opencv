-----

# 번호판 추출기 (License Plate Extractor)

이 파이썬 스크립트는 **OpenCV**를 사용하여 이미지에서 번호판을 대화형으로 추출하고 보정합니다. 이미지에서 번호판의 네 모서리를 클릭하기만 하면, 스크립트는 \*\*원근 변환(perspective transformation)\*\*을 수행하여 원근 왜곡을 수정하고 번호판이 정면에서 보는 것처럼 보이게 합니다. 추출된 번호판은 별도의 이미지 파일로 저장됩니다.

-----

## 주요 기능

  * **대화형 지점 선택**: 이미지에서 네 개의 점을 클릭하여 관심 영역(예: 번호판)을 정의합니다.
  * **원근 변환**: 선택된 영역의 원근 왜곡을 자동으로 보정하여 직사각형의 곧게 펴진 이미지를 출력합니다.
  * **자동 저장**: 추출된 번호판을 전용 디렉터리(`extracted_plates/`)에 고유한 타임스탬프 및 순번이 있는 파일 이름으로 저장합니다.
  * **실시간 시각화**: 클릭한 점이 표시된 원본 이미지와 최종 추출된 번호판을 모두 표시합니다.

-----

## 작동 방식: 원근 변환

이 스크립트의 핵심은 **원근 변환**(`cv2.getPerspectiveTransform` 및 `cv2.warpPerspective`)을 사용하는 것입니다. 간단히 설명하면 다음과 같습니다:

1.  **입력 지점**: 사용자가 입력 이미지에서 왜곡된 번호판의 모서리를 정의하는 네 개의 점(`pts1`)을 제공합니다. 스크립트는 사용자의 클릭 순서와 상관없이 이 점들이 **좌상단, 우상단, 우하단, 좌하단** 모서리를 정확하게 나타내도록 자동으로 순서를 재정렬합니다.
2.  **출력 지점**: 원하는 출력 이미지에 대한 네 개의 해당 지점(`pts2`)이 정의됩니다. 이 지점들은 완벽한 직사각형(예: `[0,0]`, `[width-1,0]`, `[width-1,height-1]`, `[0,height-1]`)을 형성하며, 곧게 펴진 번호판의 모서리를 나타냅니다.
3.  **변환 행렬 계산**: `cv2.getPerspectiveTransform`은 3x3 **변환 행렬**을 계산합니다. 이 행렬은 입력 이미지의 왜곡된 사각형(정의된 `pts1`에 의해)에서 모든 픽셀을 곧게 펴진 출력 공간(정의된 `pts2`에 의해)의 해당 픽셀로 매핑하는 방법을 수학적으로 설명합니다.
4.  **변환 적용**: `cv2.warpPerspective`는 이 계산된 변환 행렬을 전체 입력 이미지에 적용합니다. 이는 `pts1`로 지정된 영역의 왜곡을 "풀고" `pts2` 사각형에 투영하여 번호판을 표준 300x150 픽셀 이미지로 효과적으로 곧게 펴줍니다. 입력 이미지에서 정의된 사각형 외부의 픽셀은 일반적으로 출력에서 검은색으로 설정되거나 무시되며, 보정된 영역에만 초점을 맞춥니다.

이 과정은 자동 번호판 인식(ALPR)과 같은 작업에서 매우 중요합니다. 번호판의 표준화되고 명확한 이미지를 제공하여 후속 문자 인식 단계를 단순화하기 때문입니다.

-----

## 시작하기

### 전제 조건

  * Python 3.x
  * OpenCV 라이브러리 (`opencv-python`)
  * NumPy 라이브러리 (`numpy`)

### 설치

1.  이 저장소를 클론하거나 제공된 코드를 파이썬 파일(예: `extract_plate.py`)로 저장하세요.
2.  필요한 라이브러리를 설치합니다:
    ```bash
    pip install opencv-python numpy
    ```

### 사용법

1.  입력 이미지(예: `car_05.jpg`)를 스크립트와 동일한 레벨에 있는 `img` 디렉터리 안에 배치합니다 (예: `your_project/img/car_05.jpg`).
2.  터미널에서 스크립트를 실행합니다:
    ```bash
    python extract_plate.py
    ```
3.  "License Plate Extractor"라는 제목의 창에 이미지가 나타납니다.
4.  이미지에서 번호판의 **네 모서리를 클릭**하세요. 클릭한 위치에 녹색 원이 나타납니다.
5.  네 번째 클릭 후, "Extracted Plate"라는 새 창에 곧게 펴진 번호판이 표시됩니다. 추출된 이미지는 `extracted_plates/` 디렉터리에도 저장됩니다.
6.  아무 키나 누르면 모든 창이 닫히고 스크립트가 종료됩니다.
